---
# Automatically generated by espanso migration tool
# Original file: default.yml

matches:
  - trigger: ":date"
    replace: "{{mydate}}"
    vars:
      - name: mydate
        type: date
        params:
          format: "%d.%m.%Y"
  - trigger: ":sign"
    replace: |-
      Freundliche Grüsse

      bpm consult ag
      Gabriel Winkler
      #gernePerDu
  - trigger: ":bsign"
    replace: |-
      Besten Dank und freundliche Grüsse

      bpm consult ag
      Gabriel Winkler
      #gernePerDu
  - trigger: ":regfind"
    replace: find -maxdepth 100 -regextype sed -type f -iregex
  - trigger: ":bp"
    replace: Bitte prüfen.
  - trigger: ":bsp"
    replace: Bitte stichprobenartig prüfen.
  - trigger: ":lorem"
    replace: "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."
  - regex: ":close(?P<person>.*);"
    replace: |-
      Guten Tag {{person}}

      Vielen Dank für Ihre Rückmeldung.
      Wir schliessen diesen Vorgang damit

      Freundliche Grüsse

      bpm consult ag
      Gabriel Winkler
      #gernePerDu
  - regex: ":bclose(?P<person>.*);"
    replace: |-
      Guten Tag {{person}}

      Vielen Dank für Ihre Rückmeldung.
      Wir schliessen diesen Vorgang damit.

      Besten Dank und freundliche Grüsse

      bpm consult ag
      Gabriel Winkler
      #gernePerDu
  - trigger: ":lip"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "ip a l | grep \"inet \" | grep dyn | awk '{print $2}' | cut -d / -f1"
          trim: true
  - trigger: ":rip"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "curl 'https://api.ipify.org'"
  - trigger: Ustü
    replace: Unterstützung
  - trigger: ":bw"
    replace: Sicherungskontrolle und Bandwechsel
  - trigger: ":atr"
    replace: apache2ctl configtest && systemctl restart apache2
  - trigger: ":atl"
    replace: apache2ctl configtest && systemctl reload apache2
  - trigger: ":dor"
    replace: systemctl restart dovecot
  - trigger: ":por"
    replace: systemctl restart postfix
  - trigger: bespr.
    replace: Besprechung
  - trigger: ":sop"
    replace: "root@sophie.intra.bpm.ch:"
  - trigger: ":dis"
    replace: "@Dispatcher: Bitte zuweisen"
  - trigger: ":br"
    replace: "/usr/local/system/scripts/backupReport/backupReport.sh -o html -f /srv/www/htdocs/backups/ -k 7 -s"
  - trigger: ":lsm"
    replace: "/var/log/system/manager/tar2tape/"
  - trigger: ";st"
    replace: "spotify ; teams"
  - regex: ":ndz(?P<person>.*);"
    replace: |-
      @{{person}}: Bitte keine Vorgänge direkt an mich zuweisen.
      Ich entferne mich hier wieder. Bitte solche Anfragen dem entsprechenden Dispatcher zuweisen. Danke.
  - trigger: ":rck"
    replace: "Vielen Dank für Ihre prompte Rückmeldung."
  - trigger: "bspw."
    replace: "Beispielsweise"
  - trigger: ":lg"
    replace: "Liebe Grüsse\nbpm consult ag\nGabriel Winkler"
  - trigger: ":347"
    replace: "Aufgabenorganisation, Standup, Zeiten buchen"
  - trigger: ":bst"
    replace: 'vi "$(uuidgen | tr -d -).bst"'
  - trigger: ":foa"
    replace: "Sollten Sie Fragen oder Anmerkungen haben, melden Sie sich ungeniert!"
  - regex: ":plan(?P<days>.*);"
    replace: "{{ output }}"
    vars:
      - name: output
        type: shell
        params:
          cmd: for i in {0..{{ days }}}; do date -d "+$i days" +"%a %d.%m"  ; done
  - regex: ":xplan(?P<days>.*);"
    replace: "{{ output }}"
    vars:
      - name: output
        type: shell
        params:
          cmd: for i in {0..{{ days }}}; do date -d "+$i days" +"%a %d.%m" ; done | grep -vE "Sa|Su"
  - trigger: :uts
    replace: "{{ output }}"
    vars:
      - name: output
        type: shell
        params:
          cmd: date +%s
  - trigger: ":mb"
    replace: "https://comelivres.ch/ftp/Merkblatt_CLN_Relauch.pdf"
  - tigger: ":tel"
    replace: "061 417 10 68"
  - regex: ":esc(?P<input>.*);"
    replace: "{{ output }}"
    vars:
      - name: output
        type: shell
        params:
          cmd: >
            tr ":" \\n <<< "{{ input }}" |
            while read -r i ; do printf %b "\u$i " ; done
  - regex: ":c(?P<input>.*);"
    replace: >
      echo "mysvn commit {{ input }} -m
      '$(rg -NI '^.*\([A-Z]{3}-[0-9]+\)' {{ input }} |
      tail -n 1 | tr -s ' ' | cut -d ' ' -f5-)'"
  - trigger: ":nsd"
    replace: nosuchuser@nosuchdomain.ch
  - trigger: ":bash"
    replace: "#!/bin/bash\n\n# Version history\n# 0.1\t\t{{ date }}\tgw\tGenesis\n\nset -euo pipefail\n\n"
    vars:
      - name: date
        type: date
        params:
          format: "%d.%m.%Y"
  - trigger: :ss
    replace: grep snap -i /usr/local/etc/system/manager/save.conf |  cut -d = -f2 | paste -sd+ | bc
  - trigger: :uuid
    replace: "{{ output }}"
    vars:
      - name: output
        type: shell
        params:
          cmd: uuidgen
  - trigger: :du
    replace: 'du -sB 1 *  | sort -n | while read size path ; do echo "$(numfmt --to=iec <<< "$size") $path" ; done'
  - regex: kt2t(?P<tape>.*);
    replace: ps h -s "$(pgrep -f "/bin/sh -c /usr/local/system/jobs/manager/tar2tape-{{ tape }}.sh")" -o pid  | xargs kill
